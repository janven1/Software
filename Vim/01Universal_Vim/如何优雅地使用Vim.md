---
date_create: 2025-12-10-星期三
software: vim
status: unstarted
source: website
---
# 00链接
| 序号  |                                    文件                                    | 类型  | 介绍                          |    添加时间    |
| :-: | :----------------------------------------------------------------------: | :-: | --------------------------- | :--------: |
| 00  | [如何优雅地使用 Vim](https://www.zhihu.com/question/20833248/answer/3130843749) | 📰  | 该笔记内容来源                     | 2025-12-10 |
| 01  |            [welcome home : vim online](https://www.vim.org/)             | 🌐  | Vim官网                       | 2025-12-10 |
| 02  |      [Vim documentation : vim online](https://www.vim.org/docs.php)      | 🌐  | Vim官方文档，<br>可以查找Vim相关配置等等设置 | 2025-12-10 |
| 03  |                                                                          |     |                             |            |
# 01课程
## 00目录
| 序号  |  内容   | 类型  | 介绍                                       |    添加时间    | 状态  |
| :-: | :---: | :-: | ---------------------------------------- | :--------: | :-: |
| 01  | Vim简介 | ✏️  | 介绍了Vim的历史；**详见下方**                       | 2025-12-10 |  ✅  |
| 02  | Vim安装 | ✏️  | 本文推荐从Vim官网中根据操作系统不同进行下载<br>**略**         | 2025-12-10 |  ✅  |
| 03  | 基本配置  | ✏️  | 列举了一些操作；**详见下方**<br>具体更加详细的基础配置修改可查看官方文档 | 2025-12-10 |  ✅  |
| 04  | 普通模式  | ✏️  | 仅列举自己不熟悉的命令；**详见下方**                     | 2025-12-10 |     |
| 05  | 命令模式  | ✏️  | 仅列举自己不熟悉的命令；**详见下方**                     | 2025-12-10 |     |
## 01Vim简介
Vim（Vi IMproved）是一款文本编辑器，它的历史可以追溯到早期的Unix系统。

在1976年，Bill Joy开发了一款名为Vi（Visual Editor）的文本编辑器。Vi最初用于Unix操作系统，并成为了许多Unix-like系统的标准编辑器。Vi以其高效的命令行界面和强大的编辑功能而闻名。

在1991年，Bram Moolenaar创建了Vim项目。Vim最初是作为Vi的改进版本而诞生的，目标是增加新的功能和改善用户体验。Vim保留了Vi的核心理念和编辑模式，同时引入了许多新特性，使编辑器更加灵活和强大。

Vim具有丰富的功能和高度可定制性。它支持多种编辑模式（包括命令模式、插入模式和可视模式），提供了强大的文本编辑能力，如快速移动光标、复制粘贴、搜索替换等。此外，Vim还支持脚本编写和插件扩展，使用户能够根据自己的需求对编辑器进行定制和扩展。

Vim不仅在Unix-like系统上受到欢迎，还可以在多个操作系统上运行，包括Windows、macOS和Linux等。这使得Vim成为了跨平台的流行编辑器。Vim是一个开源项目，有着庞大的用户社区和活跃的开发者社区。这些社区不断完善和改进Vim，发布新的版本和补丁，以提供更好的用户体验和功能支持。

通过这些年的发展和演变，Vim已经成为了程序员和其他文本编辑者中广泛使用的编辑工具之一。它的强大功能和灵活性使得用户可以高效地进行文本编辑，并享受到优雅的编辑体验。

## 03基本配置
```vim
" 基本设置
set number            " 显示行号
set tabstop=4         " 设置制表符展开的空格数
set shiftwidth=4      " 设置继承一个制表符所占用的空格数
set expandtab         " 使用空格代替制表符进行缩进
set autoindent        " 启用自动缩进
set ignorecase        " 搜索时忽略大小写
set showmatch         " 显示匹配的括号
set incsearch         " 实时搜索

" 显示设置
syntax enable         " 启用语法高亮
set background=dark   " 设置背景为暗色（适用于暗色主题）
set cursorline        " 高亮当前行
set relativenumber    " 相对行号，显示相对于当前行的行号
set wrap              " 自动折行显示长行
set linebreak         " 在单词之间断行

" 快捷键映射
map <F3> :NERDTreeToggle<CR>    " 绑定 F3 键打开/关闭目录树插件 NERDTree
map <C-n> :NERDTreeFind<CR>     " 绑定 Ctrl + n 打开 NERDTree 并定位到当前文件

" 插件管理相关
" ...

" 其他自定义设置
" ...
```
## 04普通模式
- ✅-命令已在使用；❌-停止笔记；⏳-待更新笔记；无内容表示已经完成了笔记；

| 序号  |      命令      | 介绍                                                      | 状态  |
| :-: | :----------: | ------------------------------------------------------- | :-: |
| 01  |  `Ctrl + [`  | 等同于`Esc`                                                |     |
| 02  |     `x`      | 删除光标所在位置的字符                                             |     |
| 03  |     `D`      | 删除光标所在位置到行尾的内容                                          |     |
| 04  |     `p`      | 将已复制的内容粘贴到光标所在位置的下方                                     |     |
| 05  |     `P`      | 将已复制的内容粘贴到光标所在位置的上方                                     |     |
| 06  |     `y$`     | 复制从光标位置到行尾之间的内容                                         |     |
| 07  | `/`<br>`n/N` | **关键词搜索**<br>进入搜索模式，然后输入要搜索的关键词并按下回车<br>光标将跳到下/上一个匹配项   |     |
| 08  |     `*`      | **字符串搜索**<br>Vim 将会选中当前光标所在位置的单词，<br>并在文档中继续搜索该单词       |     |
| 09  | `f`<br>`;/,` | **行内定位**<br>然后输入一个字符,光标将定位到第一个匹配的位置<br>光标跳转到下/上一个相同的字符处 |     |
| 10  |     `%`      | **匹配括号定位**<br>将光标置于某个括号上时，<br>Vim 将会跳转到配对的对应括号上         |     |
| 11  |     宏命令      | ✏️**详见下方**                                              |     |
| 12  |              |                                                         |     |
| 13  |              |                                                         |     |
| 14  |              |                                                         |     |
| 15  |              |                                                         |     |
| 16  |              |                                                         |     |
| 17  |              |                                                         |     |
| 18  |              |                                                         |     |
| 19  |              |                                                         |     |
| 20  |              |                                                         |     |
|     |              |                                                         |     |
### 11宏命令
在 Vim 中，宏（macro）是一种记录和重放编辑操作的功能。通过录制一系列的按键操作，可以将这个操作序列保存为一个宏，并随后使用单个命令来重放该宏。宏在自动执行重复性任务、批量编辑或应用多个编辑操作时非常有用。
#### 01录制宏

| 序号  |     命令     | 介绍                  | 状态  |
| :-: | :--------: | ------------------- | :-: |
| 01  | `q+(小写字母)` | 例如：`q+a` 录制宏到`a`寄存器 |  ✅  |
| 02  |  执行相应的操作   | Vim 开始记录接下来的按键操作    |  ✅  |
| 03  |  再按下`q`键   | 停止录制宏               |  ✅  |
#### 02执行宏
| 序号  |        命令        | 介绍                     | 状态  |
| :-: | :--------------: | ---------------------- | :-: |
| 01  |    `@+(寄存器名)`    | 例如：紧接着 `../01`，使用 `@a` |  ✅  |
| 02  | `<num>+@+(寄存器名)` | 重复执行宏；输入数字表示要重复执行宏的次数  |  ✅  |










## 05命令模式

| 序号  |                   命令                    | 介绍                               | 状态  |
| :-: | :-------------------------------------: | -------------------------------- | :-: |
| 01  |                  `:x`                   | 保存文件并退出 Vim                      |     |
| 02  |               `:undolist`               | 显示撤销树中的操作历史记录                    |     |
| 03  |            `:undo [number]`             | 撤销到指定编号的操作                       |     |
| 04  |            `:redo [number]`             | 重做到指定编号的操作                       |     |
| 05  |  `:s/[Old_content]/[New_content]/<CR>`  | 此命令将会替换当前行中首次出现的要替换的内容           |     |
| 06  |   `:s/[Old_content]/[New_content]/g`    | 替换所有匹配到的内容                       |     |
| 07  |   `:s/[Old_content]/[New_content]/gc`   | 确认每个替换操作                         |     |
| 08  | `:1,10 s/[Old_content]/[New_content]/g` | 要只替换某一行范围内的内容                    |     |
| 09  |   `:%s/[Old_content]/[New_content]/g`   | `%`表示应用于整个文件，`s`表示替换操作，`g`表示全局替换 |     |
| 10  |                正则表达式元字符                 | ✏️**详见下方**                       |     |
| 11  |                   限定符                   | ✏️**详见下方**                       |     |
| 12  |                   字符类                   | ✏️**详见下方**                       |     |
| 13  |                 创建和跳转标签                 | ✏️**详见下方**                       |  ❌  |
| 14  |                设置书签快速导航                 | ✏️**详见下方**                       |  ❌  |
| 15  |                分屏编辑多个文件                 | ✏️**详见下方**                       |  ⏳  |
| 16  |                                         |                                  |     |
| 17  |                                         |                                  |     |
| 18  |                                         |                                  |     |
| 19  |                                         |                                  |     |
| 20  |                                         |                                  |     |
|     |                                         |                                  |     |
### 00注意事项
| 序号  | 注意事项  | 介绍                                     | 对应序号  |
| :-: | :---: | -------------------------------------- | :---: |
| 01  | 撤销或重做 | 撤销或重做过程中执行了其他编辑操作，可能会影响撤销和重做的结果        |       |
| 02  |  搜索   | 搜索特殊字符（如正则表达式中的元字符），请在前面加上反斜杠（`\`）进行转义 | 02-04 |
| 03  |  搜索   | 消高亮显示搜索结果，可以在命令行中输入`:noh`并按下回车         | 05-08 |
|     |       |                                        |       |
### 10正则表达式元字符
| 序号  | 元字符 | 介绍           | 状态  |
| :-: | :-: | ------------ | :-: |
| 01  | `^` | 行的开始         |     |
| 02  | `$` | 行的结束         |     |
| 03  | `.` | 匹配任意字符       |     |
| 04  | `*` | 零次或多次重复前一个字符 |     |
例子
- 要查找以 "start" 开头的行，可以输入`/^start`。
- 要查找以 "end" 结尾的行，可以输入`/end$`。
### 11限定符

| 序号  | 限定符 | 介绍          | 状态  |
| :-: | :-: | ----------- | :-: |
| 00  | ✏️  | 限定符可以指定匹配次数 |     |
| 01  | `+` | 一次或多次       |     |
| 02  | `?` | 零次或一次       |     |
| 03  |     |             |     |
### 12字符类
| 序号  |   字符类   | 介绍           | 状态  |
| :-: | :-----: | ------------ | :-: |
| 00  |   ✏️    | 字符类用于匹配一组字符  |     |
| 01  | `[abc]` | 匹配字符 a、b 或 c |     |
| 02  | `[0-9]` | 匹配数字         |     |
| 03  |         |              |     |
### 13创建和跳转标签
- 在 Vim 中，可以使用标签（tags）来快速导航和查找代码中的函数、类、变量等。

| 序号  |      命令       | 介绍                                                                           | 状态  |
| :-: | :-----------: | ---------------------------------------------------------------------------- | :-: |
| 01  | `:ctags -R .` | （确保已经安装了 ctags 工具）<br>这将在当前目录及其子目录中递归地创建一个名为 `tags` 的标签文件，其中包含程序代码中的各种标识符信息。 |     |
| 02  |               |                                                                              |     |
| 03  |               |                                                                              |     |
|     |               |                                                                              |     |
在 Vim 中，可以使用标签（tags）来快速导航和查找代码中的函数、类、变量等。

在 Vim 中创建和跳转标签的基本步骤：

1. 创建标签文件：

- 在命令行中运行 `ctags -R .` 命令（确保已经安装了 ctags 工具）。这将在当前目录及其子目录中递归地创建一个名为 `tags` 的标签文件，其中包含程序代码中的各种标识符信息。

  

2. 跳转到标签定义处：

- 在 Vim 中，将光标移到要跳转的标识符上。
- 按下 `Ctrl+]` 键来跳转到标签定义处（即标签的定义位置）。
- 如果代码中存在多个匹配项，可以使用 `Ctrl+t` 返回到之前的位置。

  

3. 查找标签：在命令行中，使用 `:tag 标签名` 命令跳转到指定的标签。例如，要跳转到标签名为 "my_function" 的地方，在命令行中输入 `:tag my_function` 并按下回车。

  

4. 其他有用的标签命令：

- `Ctrl+]`：跳转到标签定义处。
- `Ctrl+t`：返回到之前的位置。
- `:ts 查找内容`：搜索标签并列出匹配项。
- `:tn`：跳转到下一个标签。
- `:tp`：跳转到上一个标签。
- `:ts`：显示完整的标签列表。

为了获得最佳标签导航体验，建议在项目的根目录下创建标签文件以包含整个代码库的标识符信息。使用标签可以极大地提高代码浏览和导航的效率。
### 14设置书签快速导航
在 Vim 中设置和跳转书签的步骤：

1. 设置书签：

- 在编辑模式下，将光标移动到希望设置书签的位置。
- 按下`m`键，然后输入书签名（小写字母）来设置书签。例如：`ma`。
 

2. 跳转到书签：在命令行模式下，按下`'`（单引号）键，然后输入书签名来跳转到相应的书签。例如，要跳转到之前设置的 `a` 书签，可以输入`'a`。


注意，书签名区分大小写，并且它们只在当前打开的文件中有效。如果需要在不同的文件中保存书签，可以使用全局标记替代书签。

此外，Vim 还提供了一些其他与书签相关的命令和快捷键，例如`:marks`命令可用于列出当前文件的所有书签，`` ` ``（反引号）键可用于跳转到上一个访问过的位置等。


### 15分屏编辑多个文件

在 Vim 中进行分屏编辑的步骤：



1. 水平分割窗口：

- 打开一个文件后，进入命令行模式（按下`Esc`键），输入`:split`命令或缩写形式`:sp`。
- 接着输入要打开的另一个文件的完整路径或文件名，并按下`Enter`键。
- 这将在水平方向上分割出一个新的窗口，并在新窗口中打开指定的文件。


2. 垂直分割窗口：

- 在已有窗口中，进入命令行模式，输入`:vsplit`命令或缩写形式`:vs`。
- 然后输入要打开的另一个文件的完整路径或文件名，并按下`Enter`键。
- 这将在垂直方向上分割出一个新的窗口，并在新窗口中打开指定的文件。


3. 切换焦点：

- 在分屏编辑时，可以使用快捷键`Ctrl + W`跳转到不同的窗口。
- 按下`Ctrl + W`后，再按下`h`、`j`、`k`、`l`键可以在左侧、下方、上方和右侧的窗口之间进行切换。


4. 关闭窗口：

- 在当前窗口中编辑的文件若不再需要，可以关闭窗口。
- 获取要关闭的窗口的焦点后，进入命令行模式，输入`:q`命令即可关闭该窗口。
- 如果更改保存过，请使用`:wq`命令来保存并关闭窗口。


  
# 99待阅读
## 九、Vim进阶技巧

### 9.1、使用折叠和缩进

在Vim中，可以使用折叠功能和缩进功能来提高代码的可读性和编辑效率。下面是关于如何在Vim中使用折叠和缩进的简要说明：

  

1. 折叠文本：

- 手动折叠：在普通模式下，将光标放在想要折叠的行上，然后输入 `zf + 移动光标到末尾行`，例如 `zf10j` 折叠当前行和下方的10行。
- 自动折叠：Vim支持根据特定规则自动生成折叠，例如按函数或语法折叠。可以启用自动折叠功能，在Vim配置文件（.vimrc）中添加以下行来设置默认开启：

```bash
     set foldmethod=syntax  " 使用语法折叠
     set foldenable        " 启用折叠
```

  

  

2. 展开折叠：

- 手动展开：在普通模式下，将光标放在折叠行上，然后键入 `zo` 命令来展开当前折叠。
- 全部展开：在普通模式下，使用 `zR` 命令展开所有折叠。

  

3. 缩进文本：

- 手动缩进：在普通模式下，将光标放在想要缩进的行上，然后按下 `>>` 进行向右缩进，或者按下 `<<` 进行向左缩进。
- 批量缩进：可以使用可视模式选择多个行，然后按下 `>` 进行向右缩进，或者按下 `<` 进行向左缩进。

  

注意：Vim的折叠和缩进功能对于不同的文件类型可能会有所不同。可以根据需要在Vim配置文件中添加相关设置来自定义折叠和缩进的行为。

### 9.2、使用外部命令和过滤器

在Vim中，可以使用外部命令和过滤器来处理文本。下面是关于如何在Vim中使用外部命令和过滤器的简要说明：

  

1. 执行外部命令：

- 在普通模式下，使用冒号（：）进入命令行模式。
- 输入 `!` 加上想要执行的外部命令，并按下回车键。例如，要在Vim中运行ls命令查看当前目录内容，可以输入 `:!ls`。

  

2. 运行过滤器：

- 在普通模式下，使用可视模式选择要过滤的文本。
- 按下冒号（：）进入命令行模式，并且会自动出现选定的范围符号（`'<,'>`）。
- 输入 `!` 加上过滤命令，并按下回车键。例如，要使用排序命令对选定的文本进行排序，可以输入 `!sort`。

  

3. 重定向输出：

- 在普通模式下，使用冒号（：）进入命令行模式。
- 输入 `w` 跟上输出文件名，并按下回车键。例如，要将当前缓冲区的内容保存到一个名为output.txt的文件中，可以输入 `:w output.txt`。

  

  

### 9.3、优化移动和文本选择技巧

1. 快速移动光标：

- 使用h、j、k、l键（左、下、上、右）来在普通模式下进行基本的字符级别移动。
- 使用单词级别移动：使用w（下一个单词的开头）、e（下一个单词的结束）和b（前一个单词的开头）键。
- 使用行级别移动：使用^（行的开头）和$（行的结尾）键。

  

2. 高效文本选择：

- 在普通模式下，按v进入可视模式，然后使用移动命令移动光标来选择文本。例如，使用h、j、k、l移动光标来选择单个字符，或使用w、e、b移动光标来选择单词。
- 若要快速选择一行或多行文本，可以使用SHIFT+v来选择整行，或者在普通模式下使用数字加G命令来选择指定行数。

  

3. 跳转和搜索：

- 使用gg来跳转到文件开头，使用G跳转到文件末尾。
- 要在当前行内搜索，可以使用f加要查找的字符。例如，输入fa将光标移到当前行上的下一个字母"a"处。
- 若要在整个文件中搜索，可以在普通模式下按/，然后输入要搜索的关键字，并按下回车键。使用n键可以跳转到下一个匹配项。

  

4. 文本对象选择：使用文本对象能够快速选择特定片段的文本。例如，使用iw（内部单词）选择当前单词，或使用i"（内部引号）选择引号内的文本。类似地，使用a加相应的文本对象可以选择包括周围的字符。

  

5. 使用宏：使用q和宏名来录制宏。例如，按qa开始录制一个宏，并执行一系列命令，之后按q结束录制。可以使用@加宏名来运行录制好的宏。宏能够自动执行复杂的编辑操作，节省时间和精力。


## 十、Vim脚本入门

### 10.1、Vim脚本语言简介

Vim脚本是一种专门用于编写Vim编辑器配置和自定义功能的脚本语言。它是基于Vim编辑器内部的Ex命令语言而扩展而来的，具有一些面向对象的特性。

  

1. Vim脚本以`.vim`为扩展名，并使用Vim自定义的语法。脚本文件可以包含多个函数，在Vim启动时自动执行。函数通过使用`function`关键字定义。
2. Vim脚本支持多种数据类型，如整数、字符串、列表和字典。变量以`let`关键字声明，不需要提前指定类型。
3. Vim脚本语言支持条件判断和循环控制流语句，如`if-else`语句和`for`循环。这些语句使能够根据条件或迭代列表执行不同的操作。
4. Vim脚本可以访问和操作Vim编辑器中的各种对象和属性，例如当前缓冲区、窗口和标签页。可以使用对象的方法来执行诸如插入文本、移动光标和查找替换等操作。
5. Vim脚本允许创建自定义命令和键盘映射，以便在编辑器中执行特定的操作。这使得可以根据个人需求来定制Vim的行为。

  

Vim脚本语言功能强大且灵活，可以极大地扩展和自定义Vim编辑器。使用Vim脚本，可以编写插件、自定义编辑器行为和热键，以满足特定的编辑需求。学习和掌握Vim脚本语言将能够更好地利用Vim的强大功能和定制化能力。

### 10.2、编写简单的Vim脚本来自动化任务

当编写Vim脚本来自动化任务时的步骤：

  

1. 创建脚本文件：使用任何文本编辑器创建一个以`.vim`为扩展名的新文件，例如`myscript.vim`。

  

2. 定义函数：在脚本文件中，使用`function`关键字定义一个函数，命名为希望的名称，并在函数体内编写执行特定任务的代码。例如，假设想要自动格式化当前缓冲区中的代码，可以定义一个名为`AutoFormat`的函数。

```vim
   function! AutoFormat()
     " 在这里编写自动格式化代码的逻辑
   endfunction
```

  

  

3. 注册命令或映射：在函数定义下方，可以使用以下方法之一将该函数与Vim命令或键盘映射相关联。

  

- 命令方式注册命令：使用`:command`命令来注册一个自定义命令，该命令会调用定义的函数。

```vim
     command! AutoFormat :call AutoFormat()
```

  

  

- 键盘映射方式注册映射：使用`:map`命令来添加一个键盘映射，使特定按键触发定义的函数。

```vim
     nnoremap <F5> :call AutoFormat()<CR>
```

  

4. 保存脚本文件：在完成编写脚本后，保存并关闭脚本文件。

  

5. 运行脚本：启动Vim编辑器，并在编辑器中执行以下命令之一：

  

- 如果使用了命令方式注册命令，请输入`:AutoFormat`执行自动格式化任务。
- 如果使用了键盘映射方式，请按下相应的键（例如F5）执行自动格式化任务。

  

示例，自动删除当前缓冲区中的所有空行：

```vim
function! DeleteEmptyLines()
  " 保存当前光标位置
  let save_cursor = getcurpos()

  " 移动到缓冲区开头
  call cursor(1, 1)

  " 循环遍历缓冲区的每一行
  while line('.') <= line('$')
    " 如果当前行是空行，则删除
    if getline('.') =~# '^$'
      silent! normal! dd
    endif

    " 移动到下一行
    call cursor(line('.') + 1, 1)
  endwhile

  " 恢复原始光标位置
  call setpos('.', save_cursor)
endfunction

" 注册命令
command! DeleteEmptyLines :call DeleteEmptyLines()
```

将上述代码保存为`.vim`文件（例如`delete_empty_lines.vim`）并加载到Vim中。

然后，在Vim编辑器中执行`:DeleteEmptyLines`命令，即可删除当前缓冲区中的所有空行。
